---
import type { HTMLAttributes } from 'astro/types';

interface Props extends HTMLAttributes<'header'> {
  currentPath: string;
}

const { currentPath, ...attrs } = Astro.props;

const navLinks = [
  { href: '/astro', text: 'Astro' },
  { href: '/tailwind', text: 'Tailwind' },
  { href: '/components', text: 'Components' },
];
---

<header class="bg-[#0F172A] text-[#FFFFFF] shadow-lg py-4" {...attrs}>
  <div class="container mx-auto px-4 flex justify-between items-center">
    <a href="/" class="flex items-center gap-2 group">
      <svg
        class="h-8 w-8 text-[#00A3FF] transition-transform duration-300 ease-in-out group-hover:rotate-12"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M9.75 17L9 20l-1 1h8l-1-1-1-3m-6.938-12l1.947 2.607a2.5 2.5 0 001.647.893h3.318a2.5 2.5 0 001.647-.893L14.25 5M10 18h4M5 14h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v5a2 2 0 002 2z"
        ></path>
      </svg>
      <span class="font-['Exo_2'] text-2xl font-bold text-[#00A3FF] tracking-tight">
        Docs
      </span>
    </a>

    <!-- Mobile menu button -->
    <button
      id="mobile-menu-button"
      class="md:hidden p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-[#00A3FF]"
      aria-label="Toggle navigation menu"
      aria-expanded="false"
      aria-controls="mobile-menu"
    >
      <svg
        class="h-6 w-6 text-[#FFFFFF]"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M4 6h16M4 12h16M4 18h16"
        ></path>
      </svg>
    </button>

    <!-- Desktop navigation -->
    <nav class="hidden md:flex" aria-label="Main navigation">
      <ul class="flex space-x-8">
        {navLinks.map((link) => (
          <li>
            <a
              href={link.href}
              class:list={[
                "font-['Inter'] text-lg relative pb-1 transition-colors duration-200 ease-in-out",
                currentPath.startsWith(link.href)
                  ? 'text-[#00A3FF] after:absolute after:left-0 after:bottom-0 after:h-0.5 after:w-full after:bg-[#00A3FF]'
                  : 'text-[#FFFFFF] hover:text-[#00A3FF] after:absolute after:left-0 after:bottom-0 after:h-0.5 after:w-0 after:bg-[#00A3FF] after:transition-all after:duration-300 after:ease-in-out hover:after:w-full',
              ]}
              aria-current={currentPath.startsWith(link.href) ? 'page' : undefined}
            >
              {link.text}
            </a>
          </li>
        ))}
      </ul>
    </nav>
  </div>

  <!-- Mobile navigation (hidden by default) -->
  <nav
    id="mobile-menu"
    class="md:hidden hidden bg-[#1A202C] px-4 pt-2 pb-4 space-y-4"
    aria-label="Mobile navigation"
  >
    <ul class="flex flex-col space-y-4">
      {navLinks.map((link) => (
        <li>
          <a
            href={link.href}
            class:list={[
              "block font-['Inter'] text-lg py-2 px-3 rounded-md transition-colors duration-200 ease-in-out",
              currentPath.startsWith(link.href)
                ? 'bg-[#00A3FF] text-[#FFFFFF]'
                : 'text-[#FFFFFF] hover:bg-[#2D3748]',
            ]}
            aria-current={currentPath.startsWith(link.href) ? 'page' : undefined}
          >
            {link.text}
          </a>
        </li>
      ))}
    </ul>
  </nav>
</header>

<script is:inline>
  document.addEventListener('DOMContentLoaded', () => {
    const button = document.getElementById('mobile-menu-button');
    const menu = document.getElementById('mobile-menu');

    if (button && menu) {
      button.addEventListener('click', () => {
        const isExpanded = button.getAttribute('aria-expanded') === 'true';
        button.setAttribute('aria-expanded', String(!isExpanded));
        menu.classList.toggle('hidden');
      });
    }
  });
</script>